- items ||= nil
- homepage_section ||= nil

- if homepage_section
  .pt-5.pb-lg-4
    h2.h6.mid-caption--large.text-center.text-uppercase.font-weight-semibold
      = items.first.item_type.api_key

.d-none.d-lg-block
  .row
    - items.map do |item|
      - spacing = homepage_section ? "my-4" : "mb-4"
      .col-lg-5 class=spacing
        - unless homepage_section
          p.ml-lg-4.mid-caption.text-secondary
            = partial "partials/formatted-date",
              locals: {date: item.date_shown}
        h2.ml-lg-4.h4.text-primary
          = link_to page_path(item),
            class: "text-decoration-none"
            = item.title
      .col-lg-1

.row
  - items.map do |item|

    ruby:
      placeholder = if item.respond_to?(:placeholder_image) &&
        (item.placeholder_image.present? && item.use_placeholder_image)
        true
      end

    .col-lg-6
      .d-lg-none.my-4.pt-4
        - unless homepage_section
          p.ml-lg-4.mid-caption.text-secondary
            = partial "partials/formatted-date",
              locals: {date: item.date_shown}
        h2.ml-lg-4.h4.text-primary.mt-2g
          = link_to page_path(item),
            class: "text-decoration-none"
            = item.title
      = link_to page_path(item)
        .img-responsive-wrapper
          svg.icon.video_two_col_icon.bg-white.icon-primary.rounded.p-1
            use xlink:href="/images/sprite.svg#it-video"
          figure.mb-0

            ruby:
              id = item.video.provider_uid
              youtube_thumb = "https://i.ytimg.com/vi/#{id}/maxresdefault.jpg"
              thumbnail = placeholder ? item.placeholder_image : youtube_thumb

            - if placeholder
              = proxy_image_tag thumbnail.lqip_data_url(w: 10,
                h: 10,
                fit: "crop"),
                data: {sizes: "100vw",
                  src: thumbnail.url(w: 700,
                     h: 400,
                     fit: "crop",
                     auto: "compress"),
                  srcset: "#{thumbnail.url(w: 450,
                      h: 330,
                      fit: 'crop',
                      auto: 'compress')} 480w,
                    #{thumbnail.url(w: 600,
                      h: 333,
                      fit: 'crop',
                      auto: 'compress')} 632w,
                      #{thumbnail.url(w: 560,
                        h: 333,
                        fit: 'crop',
                        auto: 'compress')} 844w,
                      #{thumbnail.url(w: 700,
                        h: 400,
                        fit: 'crop',
                        auto: 'compress')} 1091w,
                      #{thumbnail.url(w: 700,
                        h: 400,
                        fit: 'crop',
                        auto: 'compress')} 1320w,
                      #{thumbnail.url(w: 700,
                        h: 400,
                        fit: 'crop',
                        auto: 'compress')} 1440w"},
                class: "video_two_col_thumbnail lazyload d-block",
                alt: thumbnail.alt,
                title: thumbnail.title

            - else
              = image_tag thumbnail,
                class: "video_two_col_thumbnail lazyload d-block"

.row.mt-2.pb-4
  .col-12.text-center.my-5
    = partial "partials/button",
    locals: {btn_url: dato.videos_index,
      label: t("see_more"),
      white_outline: true,
      aria_label: "sezione video"}
